# Lychee link checker configuration
# https://github.com/lycheeverse/lychee

# Display settings
no_progress = true  # Don't show progress bar (better for CI/CD and scripts)
format = "detailed" # Output format: compact, detailed, json, markdown, raw

# Maximum number of concurrent requests
max_concurrency = 10

# User agent string
user_agent = "Mozilla/5.0 (compatible; BrainCraft.io/1.0)"

# Request timeout in seconds
timeout = 20

# Maximum number of retries
max_retries = 2

# Accept these status codes
accept = [200, 201, 202, 203, 204, 206, 301, 302, 304, 401, 403]

# Exclude patterns
exclude = [
  # Localhost and local network
  "^https?://localhost",
  "^https?://127\\.0\\.0\\.1",
  "^https?://192\\.168\\.",
  "^https?://10\\.",

  # Common development URLs
  "^https?://example\\.com",
  "^https?://test\\.com",

  # GitHub edit/new links
  "^https://github\\.com/.*/edit/",
  "^https://github\\.com/.*/new/",

  # Anchors in markdown (handled separately)
  "^#",

  # NPM package internal file references (these don't exist in published packages)
  "^file://.*\\.npm-global/",
  "^file://.*node_modules/",

  # Common npm package documentation files that don't exist
  "CONTRIBUTING\\.md$",
  "CHANGELOG\\.md$",
  "MIGRATION\\.md$",
  "/docs/.*\\.md$",
  "/examples/.*\\.(js|ts|md)$",
  "/test/.*\\.(js|ts)$",
  "\\.verb\\.md$",
  "screenshot\\.(png|jpg|gif|svg)$",
  "logo\\.(png|jpg|gif|svg)$",
]

# Link checking behavior
include_verbatim = true  # Check links in verbatim sections (code blocks)
include_anchor = true    # Check anchors
include_fragments = true # Check fragments

# Network exclusions
exclude_link_local = true # Skip link-local addresses (169.254.x.x)
exclude_loopback = true   # Skip localhost and 127.0.0.1
exclude_private = true    # Exclude private IPs
exclude_mail = true       # Exclude mail addresses

# Offline behavior
skip_missing = true # Skip missing files when offline

# Cache results for 1 hour
cache = true

# Exclude paths
exclude_path = [
  # Dependencies and build artifacts
  ".npm-global",
  ".npm-global/**",
  "node_modules",
  "node_modules/**",
  ".git",
  ".mise",
  ".cargo",
  ".cache",
  "target",
  "dist",
  "build",
  "tmp",
  ".reports",
]
